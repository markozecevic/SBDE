{
  "class": "Workflow",
  "steps": [
    {
      "id": "#Cuffquant",
      "run": {
        "sbg:project": "bix-demo/cufflinks-2-2-1-demo",
        "sbg:validationErrors": [],
        "sbg:sbgMaintained": false,
        "id": "admin/sbg-public-data/cuffquant/1",
        "x": 747,
        "sbg:toolkit": "Cufflinks",
        "sbg:revisionsInfo": [
          {
            "sbg:revision": 0,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911492
          },
          {
            "sbg:revision": 1,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911493
          }
        ],
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://cole-trapnell-lab.github.io/cufflinks/"
          },
          {
            "label": "Manual",
            "id": "http://cole-trapnell-lab.github.io/cufflinks/cuffquant/index.html"
          },
          {
            "label": "Source code",
            "id": "http://cole-trapnell-lab.github.io/cufflinks/assets/downloads/cufflinks-2.2.1.tar.gz"
          },
          {
            "label": "Publication",
            "id": "http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3146043/"
          }
        ],
        "sbg:createdBy": "bix-demo",
        "sbg:revision": 1,
        "sbg:cmdPreview": "/opt/cuffquant --verbose --no-update-check --multi-read-correct  --library-type fr-unstranded --frag-len-mean 0 --frag-len-std-dev 0 --max-mle-iterations 0 --max-bundle-frags 0 --no-effective-length-correction  --min-alignment-count 0 --max-frag-multihits 0 --no-length-correction  --mask-file mask_file.ext --frag-bias-correct frag_bias_correct.ext  annotations.ext  /test-data/aligned_reads.ext  && mv abundances.cxb aligned_reads_abundances.cxb annotations.ext /test-data/aligned_reads.ext",
        "sbg:createdOn": 1450911492,
        "sbg:contributors": [
          "bix-demo"
        ],
        "sbg:id": "admin/sbg-public-data/cuffquant/1",
        "stdout": "",
        "description": "Cuffquant performs preparations on SAM/BAM files for differential expression analysis of RNA-seq data. It computes the gene and transcript expression profiles of various samples, which can be fed into Cuffnorm or Cuffdiff. \n\nNote: It is recommended to use Cuffquant for analyses involving more than a handful of libraries.",
        "successCodes": [],
        "sbg:toolAuthor": "Cole Trapnell/University of Washington",
        "sbg:license": "Boost Software License 1.0",
        "stdin": "",
        "hints": [
          {
            "dockerPull": "images.sbgenomics.com/ana_d/cufflinks:2.2.1",
            "dockerImageId": "191aecc448a8",
            "class": "DockerRequirement"
          },
          {
            "value": 8,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 6000,
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedOn": 1450911493,
        "label": "Cuffquant",
        "baseCommand": [
          "/opt/cuffquant",
          "--verbose",
          "--no-update-check"
        ],
        "sbg:categories": [
          "Differential-Expression",
          "SAM/BAM-Processing"
        ],
        "class": "CommandLineTool",
        "y": 235,
        "temporaryFailCodes": [],
        "requirements": [
          {
            "requirements": [
              {
                "dockerPull": "rabix/js-engine",
                "class": "DockerRequirement"
              }
            ],
            "id": "#cwl-js-engine",
            "class": "ExpressionEngineRequirement"
          }
        ],
        "outputs": [
          {
            "type": [
              "null",
              "File"
            ],
            "outputBinding": {
              "sbg:metadata": {},
              "sbg:inheritMetadataFrom": "#aligned_reads",
              "glob": {
                "engine": "#cwl-js-engine",
                "script": "$job.inputs.aligned_reads.path.split('.').slice(0, $job.inputs.aligned_reads.path.split('.').length-1).join('.').replace(/^.*[\\\\\\/]/, '').concat(\"_\", \"abundances.cxb\")",
                "class": "Expression"
              }
            },
            "label": "Abundances",
            "sbg:fileTypes": "CXB",
            "id": "#abundances",
            "description": "This file contains estimated transcript abundances for each sample. It can be used as an input for Cuffdiff and Cuffnorm tools."
          }
        ],
        "sbg:toolkitVersion": "2.2.1",
        "sbg:modifiedBy": "bix-demo",
        "sbg:latestRevision": 1,
        "arguments": [
          {
            "separate": true,
            "position": 50,
            "valueFrom": {
              "engine": "#cwl-js-engine",
              "script": "{\n  read_path = $job.inputs.aligned_reads.path\n  read_name = read_path.split('.').slice(0, read_path.split('.').length-1).join('.').replace(/^.*[\\\\\\/]/, '')\n  source_name = \"abundances.cxb\"\n  return \"&& mv \".concat(source_name, \" \", read_name, \"_abundances.cxb\")\n}",
              "class": "Expression"
            }
          }
        ],
        "inputs": [
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "False",
            "inputBinding": {
              "prefix": "--no-length-correction",
              "separate": true,
              "position": 12,
              "sbg:cmdInclude": true
            },
            "label": "No length correction",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#no_length_correction",
            "description": "Cuffquant will not normalize fragment counts by transcript length at all. Use this option when fragment count is independent of the size of the features being quantified (e.g. for small RNA libraries, where no fragmentation takes place, or 3 prime end sequencing, where sampled RNA fragments are all essentially the same length). Experimental option, use with caution."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "False",
            "inputBinding": {
              "prefix": "--no-effective-length-correction",
              "separate": true,
              "position": 9,
              "sbg:cmdInclude": true
            },
            "label": "No effective length correction",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#no_effective_length_correction",
            "description": "Cuffquant will not employ its \"effective\" length normalization to transcript FPKM."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "False",
            "inputBinding": {
              "prefix": "--multi-read-correct",
              "separate": true,
              "position": 3,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-u",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#multi_read_correct",
            "label": "Correct for reads mapped to multiple loci",
            "description": "Tells Cuffquant to do an initial estimation procedure to more accurately weight reads mapping to multiple locations in the genome."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "10",
            "inputBinding": {
              "prefix": "--min-alignment-count",
              "separate": true,
              "position": 10,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-c",
            "type": [
              "null",
              "int"
            ],
            "id": "#min_alignment_count",
            "label": "Minimum number of alignments",
            "description": "Minimum number of alignments in a locus for testing."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "5000",
            "inputBinding": {
              "prefix": "--max-mle-iterations",
              "separate": true,
              "position": 7,
              "sbg:cmdInclude": true
            },
            "label": "Maximum MLE number of iterations",
            "type": [
              "null",
              "int"
            ],
            "id": "#max_mle_iterations",
            "description": "Sets the number of iterations allowed during maximum likelihood estimation of abundances."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "unlimited",
            "inputBinding": {
              "prefix": "--max-frag-multihits",
              "separate": true,
              "position": 11,
              "sbg:cmdInclude": true
            },
            "label": "Maximum alignments per fragment",
            "type": [
              "null",
              "int"
            ],
            "id": "#max_frag_multihits",
            "description": "Maximum number of alignments allowed per fragment"
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "1000000",
            "inputBinding": {
              "prefix": "--max-bundle-frags",
              "separate": true,
              "position": 8,
              "sbg:cmdInclude": true
            },
            "label": "Maximum bundle fragments",
            "type": [
              "null",
              "int"
            ],
            "id": "#max_bundle_frags",
            "description": "Sets the maximum number of fragments a locus may have before being skipped."
          },
          {
            "sbg:category": "Input files",
            "type": [
              "null",
              "File"
            ],
            "inputBinding": {
              "prefix": "--mask-file",
              "separate": true,
              "position": 18,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-M",
            "required": false,
            "sbg:fileTypes": "GTF, GFF",
            "id": "#mask_file",
            "label": "Mask file",
            "description": "Ignore all alignments within transcripts in this file. Tells Cuffquant to ignore all reads that could have come from transcripts in this GTF/GFF file. Toolkit aothors recommend including any annotated rRNA, mitochondrial and other abundant transcripts you wish to ignore in your analysis in this file. Due to variable efficiency of mRNA enrichment methods and rRNA depletion kits, masking these transcripts often improves the overall robustness of transcript abundance estimates."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "fr-unstranded",
            "inputBinding": {
              "prefix": "--library-type",
              "separate": true,
              "position": 4,
              "sbg:cmdInclude": true
            },
            "label": "Library type",
            "type": [
              "null",
              {
                "type": "enum",
                "symbols": [
                  "fr-unstranded",
                  "ff-firststrand",
                  "ff-secondstrand",
                  "ff-unstranded",
                  "fr-firststrand",
                  "fr-secondstrand",
                  "transfrags"
                ],
                "name": "library_type"
              }
            ],
            "id": "#library_type",
            "description": "In cases where Cuffquant cannot determine the platform and protocol used to generate input reads, you can supply this information manually, which will allow Cuffquant to infer source strand information with certain protocols."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "80",
            "inputBinding": {
              "prefix": "--frag-len-std-dev",
              "separate": true,
              "position": 6,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-s",
            "type": [
              "null",
              "int"
            ],
            "id": "#frag_len_std_dev",
            "label": "Fragment lengths' standard deviation",
            "description": "The standard deviation for the distribution on fragment lengths. Cuffquant learns the fragment lengths' standard deviation for each SAM/BAM file so this option is not recommended with paired-end reads."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "200",
            "inputBinding": {
              "prefix": "--frag-len-mean",
              "separate": true,
              "position": 5,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-m",
            "type": [
              "null",
              "int"
            ],
            "id": "#frag_len_mean",
            "label": "Mean fragment length",
            "description": "This is the expected (mean) fragment length. Cuffquant learns the fragment length mean for each SAM/BAM file so this option is not recommended with paired-end reads."
          },
          {
            "sbg:category": "Input files",
            "type": [
              "null",
              "File"
            ],
            "inputBinding": {
              "prefix": "--frag-bias-correct",
              "separate": true,
              "position": 19,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-b",
            "required": false,
            "sbg:fileTypes": "FASTA, FA",
            "id": "#frag_bias_correct",
            "label": "Fragment bias correct",
            "description": "Providing Cuffquant with a multifasta file via this option instructs it to run bias detection and correction algorithm which can significantly improve accuracy of transcript abundance estimates."
          },
          {
            "required": true,
            "type": [
              "File"
            ],
            "inputBinding": {
              "separate": true,
              "position": 20,
              "sbg:cmdInclude": true
            },
            "label": "Annotations",
            "sbg:category": "Input files",
            "sbg:fileTypes": "GTF, GFF",
            "id": "#annotations",
            "description": "Tells Cuffquant to use the supplied reference annotation in GTF/GFF format to estimate isoform expression. The program will ignore alignments not structurally compatible with any reference transcript."
          },
          {
            "required": true,
            "type": [
              "File"
            ],
            "inputBinding": {
              "separate": true,
              "position": 21,
              "sbg:cmdInclude": true
            },
            "label": "Aligned reads",
            "sbg:category": "Input files",
            "sbg:fileTypes": "SAM, BAM",
            "id": "#aligned_reads",
            "description": "RNA-Seq read alignments in SAM/BAM format. The SAM/BAM is a standard short read alignment format, that allows aligners to attach custom tags to individual alignments, and Cuffquant requires that the alignments you supply have some of these tags."
          }
        ],
        "sbg:job": {
          "allocatedResources": {
            "mem": 6000,
            "cpu": 8
          },
          "inputs": {
            "min_alignment_count": 0,
            "library_type": "fr-unstranded",
            "max_frag_multihits": 0,
            "mask_file": {
              "path": "mask_file.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "max_mle_iterations": 0,
            "aligned_reads": {
              "path": "/test-data/aligned_reads.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "no_length_correction": true,
            "frag_bias_correct": {
              "path": "frag_bias_correct.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "annotations": {
              "path": "annotations.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "frag_len_std_dev": 0,
            "no_effective_length_correction": true,
            "frag_len_mean": 0,
            "max_bundle_frags": 0,
            "multi_read_correct": true
          }
        }
      },
      "inputs": [
        {
          "id": "#Cuffquant.no_length_correction"
        },
        {
          "id": "#Cuffquant.no_effective_length_correction"
        },
        {
          "id": "#Cuffquant.multi_read_correct"
        },
        {
          "id": "#Cuffquant.min_alignment_count"
        },
        {
          "id": "#Cuffquant.max_mle_iterations"
        },
        {
          "id": "#Cuffquant.max_frag_multihits"
        },
        {
          "id": "#Cuffquant.max_bundle_frags"
        },
        {
          "id": "#Cuffquant.mask_file"
        },
        {
          "id": "#Cuffquant.library_type"
        },
        {
          "id": "#Cuffquant.frag_len_std_dev"
        },
        {
          "id": "#Cuffquant.frag_len_mean"
        },
        {
          "id": "#Cuffquant.frag_bias_correct",
          "source": [
            "#Reference"
          ]
        },
        {
          "id": "#Cuffquant.annotations",
          "source": [
            "#Annotations"
          ]
        },
        {
          "id": "#Cuffquant.aligned_reads",
          "source": [
            "#SBG_Flatten.flat"
          ]
        }
      ],
      "outputs": [
        {
          "id": "#Cuffquant.abundances"
        }
      ],
      "sbg:x": 747,
      "sbg:y": 235,
      "scatter": "#Cuffquant.aligned_reads"
    },
    {
      "id": "#Cuffdiff",
      "run": {
        "sbg:project": "bix-demo/cufflinks-2-2-1-demo",
        "sbg:validationErrors": [],
        "sbg:sbgMaintained": false,
        "id": "admin/sbg-public-data/cuffdiff/1",
        "x": 948,
        "sbg:toolkit": "Cufflinks",
        "sbg:revisionsInfo": [
          {
            "sbg:revision": 0,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911496
          },
          {
            "sbg:revision": 1,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911496
          }
        ],
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://cole-trapnell-lab.github.io/cufflinks/"
          },
          {
            "label": "Manual",
            "id": "http://cole-trapnell-lab.github.io/cufflinks/cuffdiff/"
          },
          {
            "label": "Source code",
            "id": "http://cole-trapnell-lab.github.io/cufflinks/assets/downloads/cufflinks-2.2.1.tar.gz"
          },
          {
            "label": "Publication",
            "id": "http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3146043/"
          }
        ],
        "sbg:createdBy": "bix-demo",
        "sbg:revision": 1,
        "sbg:cmdPreview": "/opt/cuffdiff --output-dir ./cuffdiff_dir --num-threads 15 --verbose --no-update-check --compatible-hits-norm  --total-hits-norm  --FDR 0 --multi-read-correct  --min-alignment-count 0 --library-type fr-unstranded --dispersion-method pooled --library-norm-method geometric --frag-len-mean 0 --frag-len-std-dev 0 --max-mle-iterations 0 --max-bundle-frags 0 --num-frag-count-draws 0 --num-frag-assign-draws 0 --min-reps-for-js-test 0 --no-effective-length-correction  --contrast-file contrast_file.ext --frag-bias-correct frag_bias_correct.ext --mask-file mask_file.ext  transcripts.ext --labels sample,D /test/rnaseq/SMA_D1_SCT.R.accepted_hits.abundances.cxb,/test/rnaseq/SMA_D2_SCT.R.accepted_hits.abundances.cxb /test/rnaseq/SMA_K1_SCT.R.accepted_hits.abundances.cxb,/test/rnaseq/SMA_K2_SCT.R.accepted_hits.abundances.cxb  && zip -j  SMA_.cuffdiff.zip  cuffdiff_dir/*.fpkm_tracking cuffdiff_dir/*.count_tracking cuffdiff_dir/*.read_group_tracking cuffdiff_dir/*.diff cuffdiff_dir/*.info  transcripts.ext",
        "sbg:createdOn": 1450911496,
        "sbg:contributors": [
          "bix-demo"
        ],
        "sbg:id": "admin/sbg-public-data/cuffdiff/1",
        "stdout": "",
        "description": "Cuffdiff is a highly accurate tool for performing differential expression analysis for RNA-seq experiments. It accepts read alignment files from two or more samples, calculates expression at the isoform and gene level, and tests for significant expression differences. Cuffdiff outputs a downloadable collection of files that can be explored as spreadsheets. A quality control analysis of Cuffdiff results can be performed using CummeRbundQC.",
        "successCodes": [],
        "sbg:toolAuthor": "Cole Trapnell/University of Washington",
        "sbg:license": "Boost Software License 1.0",
        "stdin": "",
        "hints": [
          {
            "dockerPull": "images.sbgenomics.com/ana_d/cufflinks:2.2.1",
            "dockerImageId": "191aecc448a8",
            "class": "DockerRequirement"
          },
          {
            "value": 30000,
            "class": "sbg:MemRequirement"
          },
          {
            "value": 15,
            "class": "sbg:CPURequirement"
          }
        ],
        "sbg:modifiedOn": 1450911496,
        "label": "Cuffdiff",
        "baseCommand": [
          "/opt/cuffdiff",
          "--output-dir",
          "./cuffdiff_dir",
          "--num-threads",
          {
            "engine": "#cwl-js-engine",
            "script": "{\n  return $job.allocatedResources.cpu\n}",
            "class": "Expression"
          },
          "--verbose",
          "--no-update-check"
        ],
        "sbg:categories": [
          "Differential-Expression"
        ],
        "class": "CommandLineTool",
        "y": 377,
        "temporaryFailCodes": [],
        "requirements": [
          {
            "requirements": [
              {
                "dockerPull": "rabix/js-engine",
                "class": "DockerRequirement"
              }
            ],
            "id": "#cwl-js-engine",
            "class": "ExpressionEngineRequirement"
          }
        ],
        "outputs": [
          {
            "type": [
              "null",
              "File"
            ],
            "outputBinding": {
              "sbg:metadata": {},
              "glob": {
                "engine": "#cwl-js-engine",
                "script": "{\n  return \"*.cuffdiff.zip\"\n}",
                "class": "Expression"
              }
            },
            "label": "Archive of Cuffdiff output files",
            "sbg:fileTypes": "ZIP",
            "id": "#zipped",
            "description": "Zipped list of output tracking, tab delimited and INFO files."
          }
        ],
        "sbg:toolkitVersion": "2.2.1",
        "sbg:modifiedBy": "bix-demo",
        "sbg:latestRevision": 1,
        "arguments": [
          {
            "prefix": "--labels",
            "separate": true,
            "position": 30,
            "valueFrom": {
              "engine": "#cwl-js-engine",
              "script": "{\n  paths = []\n  cspaths = []\n  all_groups = []\n  labels = []\n  temp_group = []\n  $job.inputs.sample_files.forEach( function(file){\n    meta_key = file.metadata.sample_group\n    all_groups.push(meta_key)\n    basename = file.path.replace(/\\\\/g,'/').replace( /.*\\//, '' )\n    /*paths.push(basename);*/\n  });\n  function onlyUnique(value, index, self) { \n    return self.indexOf(value) === index;\n  }\n  labels = all_groups.filter(onlyUnique);\n  /*return paths.join(',');*/\n  labels.forEach( function(label){\n    paths = []\n    $job.inputs.sample_files.forEach( function(sample){\n      if (sample.metadata.sample_group === label){\n        paths.push(sample.path)\n      }\n    })\n    cspaths.push(paths.join(','))\n  })\n  return labels.join(',').concat(\" \", cspaths.join(' '));\n}",
              "class": "Expression"
            }
          },
          {
            "separate": true,
            "position": 31,
            "valueFrom": "&& zip -j"
          },
          {
            "separate": true,
            "position": 32,
            "valueFrom": {
              "engine": "#cwl-js-engine",
              "script": "{\n  function sharedStart(array){\n    var A= array.concat().sort(), \n    a1= A[0], a2= A[A.length-1], L= a1.length, i= 0;\n    while(i<L && a1.charAt(i)=== a2.charAt(i)) i++;\n    return a1.substring(0, i);\n  }\n  path_list = []\n  $job.inputs.sample_files.forEach(function(f){return path_list.push(f.path.replace(/\\\\/g,'/').replace( /.*\\//, '' ))})\n  common_prefix = sharedStart(path_list)\n  return common_prefix.concat(\".cuffdiff.zip\")\n}",
              "class": "Expression"
            }
          },
          {
            "separate": true,
            "position": 33,
            "valueFrom": {
              "engine": "#cwl-js-engine",
              "script": "{\n  return \"cuffdiff_dir/*.fpkm_tracking cuffdiff_dir/*.count_tracking cuffdiff_dir/*.read_group_tracking cuffdiff_dir/*.diff cuffdiff_dir/*.info\"\n}",
              "class": "Expression"
            }
          }
        ],
        "inputs": [
          {
            "required": true,
            "type": [
              "File"
            ],
            "inputBinding": {
              "separate": true,
              "position": 29,
              "sbg:cmdInclude": true
            },
            "label": "Transcripts",
            "sbg:category": "Input files",
            "sbg:fileTypes": "GTF, GFF",
            "id": "#transcripts",
            "description": "A transcript annotation file in GTF/GFF format, produced by Cufflinks, Cuffcompare, or other source."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "False",
            "inputBinding": {
              "prefix": "--total-hits-norm",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Total hits normalization",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#total_hits_norm",
            "description": "If you set this option, Cuffdiff counts all fragments, including those not compatible with any reference transcript, towards the number of mapped hits used in the FPKM denominator."
          },
          {
            "required": true,
            "type": [
              {
                "items": "File",
                "type": "array"
              }
            ],
            "label": "Sample files",
            "sbg:category": "Input files",
            "sbg:fileTypes": "SAM, BAM, CXB",
            "id": "#sample_files",
            "description": "Either SAM/BAM files of aligned RNA-Seq reads, or CXB files produced by Cuffquant. SAM/BAM files cannot be mixed with CXB files. If more than two groups are provided, Cuffdiff tests for differential expression and regulation between all pairs of sample groups, or between all samples if no sample groups are specified."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "100",
            "inputBinding": {
              "prefix": "--num-frag-count-draws",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Number of draws for counting fragments",
            "type": [
              "null",
              "int"
            ],
            "id": "#num_frag_count_draws",
            "description": "Cuffdiff will make this many draws from each transcript's predicted negative binomial random number generator. Each draw is a number of fragments that will be probabilistically assigned to the transcripts in the transcriptome. Used to estimate the variance-covariance matrix on assigned fragment counts."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "50",
            "inputBinding": {
              "prefix": "--num-frag-assign-draws",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Number of assignments for fragment draws",
            "type": [
              "null",
              "int"
            ],
            "id": "#num_frag_assign_draws",
            "description": "For each fragment drawn from a transcript, Cuffdiff will assign it this many times (probabilistically), thus estimating the assignment uncertainty for each transcript. Used to estimate the variance-covariance matrix on assigned fragment counts."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "False",
            "inputBinding": {
              "prefix": "--no-effective-length-correction",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "No effective length correction",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#no_effective_length_correction",
            "description": "Cuffdiff will not employ its \"effective\" length normalization to transcript FPKM."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "False",
            "inputBinding": {
              "prefix": "--multi-read-correct",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-u",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#multi_read_correct",
            "label": "Correct for reads mapped to multiple loci",
            "description": "Tells Cuffdiff to do an initial estimation procedure to more accurately weight reads mapping to multiple locations in the genome."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "3",
            "inputBinding": {
              "prefix": "--min-reps-for-js-test",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Minimum replicates for JS test",
            "type": [
              "null",
              "int"
            ],
            "id": "#min_reps_for_js_test",
            "description": "Number of replicates needed for relative isoform shift testing. Cuffdiff won't test genes for differential regulation unless the conditions in question have at least this many replicates."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "10",
            "inputBinding": {
              "prefix": "--min-alignment-count",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-c",
            "type": [
              "null",
              "int"
            ],
            "id": "#min_alignment_count",
            "label": "Minimum alignment count",
            "description": "The minimum number of alignments in a locus needed to conduct significance testing on changes in that locus observed between samples. If no testing is performed, changes in the locus are deemed not significant, and the locus' observed changes don't contribute to correction for multiple testing."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "5000",
            "inputBinding": {
              "prefix": "--max-mle-iterations",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Maximum MLE number of iterations",
            "type": [
              "null",
              "int"
            ],
            "id": "#max_mle_iterations",
            "description": "Sets the number of iterations allowed during maximum likelihood estimation of abundances."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "500000",
            "inputBinding": {
              "prefix": "--max-bundle-frags",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Maximum bundle fragments",
            "type": [
              "null",
              "int"
            ],
            "id": "#max_bundle_frags",
            "description": "Sets the maximum number of fragments a locus may have before being skipped. Skipped loci are marked with status HIDATA."
          },
          {
            "sbg:category": "Input files",
            "type": [
              "null",
              "File"
            ],
            "inputBinding": {
              "prefix": "--mask-file",
              "separate": true,
              "position": 28,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-M",
            "required": false,
            "sbg:fileTypes": "GTF, GFF",
            "id": "#mask_file",
            "label": "Mask file",
            "description": "Tells Cuffdiff to ignore all reads that could have come from transcripts in this GTF file. Toolkit authors recommend including any annotated rRNA, mitochondrial and other abundant transcripts you wish to ignore in your analysis in this file. Due to variable efficiency of mRNA enrichment methods and rRNA depletion kits, masking these transcripts often improves the overall robustness of transcript abundance estimates."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "fr-unstranded",
            "inputBinding": {
              "prefix": "--library-type",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Library type",
            "type": [
              "null",
              {
                "type": "enum",
                "symbols": [
                  "fr-unstranded",
                  "ff-firststrand",
                  "ff-secondstrand",
                  "ff-unstranded",
                  "fr-firststrand",
                  "fr-secondstrand",
                  "transfrags"
                ],
                "name": "library_type"
              }
            ],
            "id": "#library_type",
            "description": "In cases where Cuffdiff cannot determine the platform and protocol used to generate input reads, you can supply this information manually, which will allow Cufflinks to infer source strand information with certain protocols."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "geometric",
            "inputBinding": {
              "prefix": "--library-norm-method",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Library normalization method",
            "type": [
              "null",
              {
                "type": "enum",
                "symbols": [
                  "geometric",
                  "classic-fpkm",
                  "quartile"
                ],
                "name": "library_norm_method"
              }
            ],
            "id": "#library_norm_method",
            "description": "Value of this parameter controls how library sizes, i.e. sequencing depths, are normalized in Cuffdiff."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "80",
            "inputBinding": {
              "prefix": "--frag-len-std-dev",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-s",
            "type": [
              "null",
              "int"
            ],
            "id": "#frag_len_std_dev",
            "label": "Fragment lengths' standard deviation",
            "description": "The standard deviation for the distribution on fragment lengths. Cuffdiff learns the fragment lengths' standard deviation for each SAM/BAM file so this option is not recommended with paired-end reads."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "200",
            "inputBinding": {
              "prefix": "--frag-len-mean",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-m",
            "type": [
              "null",
              "int"
            ],
            "id": "#frag_len_mean",
            "label": "Mean fragment length",
            "description": "This is the expected (mean) fragment length. Cuffdiff learns the fragment length mean for each SAM/BAM file so this option is not recommended with paired-end reads."
          },
          {
            "sbg:category": "Input files",
            "type": [
              "null",
              "File"
            ],
            "inputBinding": {
              "prefix": "--frag-bias-correct",
              "separate": true,
              "position": 27,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-b",
            "required": false,
            "sbg:fileTypes": "FASTA, FA",
            "id": "#frag_bias_correct",
            "label": "Fragment bias correct",
            "description": "Providing Cuffdiff with the multifasta file your reads were mapped to via this option instructs it to run bias detection and correction algorithm which can significantly improve accuracy of transcript abundance estimates."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "pooled",
            "inputBinding": {
              "prefix": "--dispersion-method",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Dispersion method",
            "type": [
              "null",
              {
                "type": "enum",
                "symbols": [
                  "pooled",
                  "blind",
                  "per-condition",
                  "poisson"
                ],
                "name": "dispersion_method"
              }
            ],
            "id": "#dispersion_method",
            "description": "Method used to estimate dispersion models"
          },
          {
            "sbg:category": "Input files",
            "type": [
              "null",
              "File"
            ],
            "inputBinding": {
              "prefix": "--contrast-file",
              "separate": true,
              "position": 26,
              "sbg:cmdInclude": true
            },
            "sbg:altPrefix": "-C",
            "required": false,
            "sbg:fileTypes": "TXT",
            "id": "#contrast_file",
            "label": "Contrast file",
            "description": "Cuffdiff performs the contrasts (differential expression analysis between two sample groups or between two samples) specified in this tab delimited text file."
          },
          {
            "sbg:category": "Advanced Options",
            "sbg:toolDefaultValue": "True",
            "inputBinding": {
              "prefix": "--compatible-hits-norm",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Compatible hits normalization",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#compatible_hits_norm",
            "description": "With this option, Cuffdiff counts only those fragments compatible with some reference transcript towards the number of mapped hits used in the FPKM denominator. Using this mode is generally recommended in Cuffdiff to reduce certain types of bias caused by different amounts of ribosomal reads which can create the impression of falsely differentially expressed genes."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "0.05",
            "inputBinding": {
              "prefix": "--FDR",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "FDR",
            "type": [
              "null",
              "float"
            ],
            "id": "#FDR",
            "description": "The allowed false discovery rate."
          }
        ],
        "sbg:job": {
          "allocatedResources": {
            "mem": 30000,
            "cpu": 15
          },
          "inputs": {
            "frag_bias_correct": {
              "path": "frag_bias_correct.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "contrast_file": {
              "path": "contrast_file.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "min_alignment_count": 0,
            "library_type": "fr-unstranded",
            "library_norm_method": "geometric",
            "min_reps_for_js_test": 0,
            "mask_file": {
              "path": "mask_file.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "max_mle_iterations": 0,
            "sample_files": [
              {
                "path": "/test/rnaseq/SMA_D1_SCT.R.accepted_hits.abundances.cxb",
                "class": "File",
                "metadata": {
                  "sample_group": "sample"
                },
                "secondaryFiles": [],
                "size": 0
              },
              {
                "path": "/test/rnaseq/SMA_D2_SCT.R.accepted_hits.abundances.cxb",
                "secondaryFiles": [],
                "metadata": {
                  "sample_group": "sample"
                }
              },
              {
                "path": "/test/rnaseq/SMA_K1_SCT.R.accepted_hits.abundances.cxb",
                "secondaryFiles": [],
                "metadata": {
                  "sample_group": "D"
                }
              },
              {
                "path": "/test/rnaseq/SMA_K2_SCT.R.accepted_hits.abundances.cxb",
                "secondaryFiles": [],
                "metadata": {
                  "sample_group": "D"
                }
              }
            ],
            "dispersion_method": "pooled",
            "multi_read_correct": true,
            "total_hits_norm": true,
            "FDR": 0,
            "transcripts": {
              "path": "transcripts.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "frag_len_std_dev": 0,
            "no_effective_length_correction": true,
            "frag_len_mean": 0,
            "compatible_hits_norm": true,
            "max_bundle_frags": 0,
            "num_frag_assign_draws": 0,
            "num_frag_count_draws": 0
          }
        }
      },
      "inputs": [
        {
          "id": "#Cuffdiff.transcripts",
          "source": [
            "#Annotations"
          ]
        },
        {
          "id": "#Cuffdiff.total_hits_norm"
        },
        {
          "id": "#Cuffdiff.sample_files",
          "source": [
            "#Cuffquant.abundances"
          ]
        },
        {
          "id": "#Cuffdiff.num_frag_count_draws"
        },
        {
          "id": "#Cuffdiff.num_frag_assign_draws"
        },
        {
          "id": "#Cuffdiff.no_effective_length_correction"
        },
        {
          "id": "#Cuffdiff.multi_read_correct"
        },
        {
          "id": "#Cuffdiff.min_reps_for_js_test"
        },
        {
          "id": "#Cuffdiff.min_alignment_count"
        },
        {
          "id": "#Cuffdiff.max_mle_iterations"
        },
        {
          "id": "#Cuffdiff.max_bundle_frags"
        },
        {
          "id": "#Cuffdiff.mask_file"
        },
        {
          "id": "#Cuffdiff.library_type"
        },
        {
          "id": "#Cuffdiff.library_norm_method"
        },
        {
          "id": "#Cuffdiff.frag_len_std_dev"
        },
        {
          "id": "#Cuffdiff.frag_len_mean"
        },
        {
          "id": "#Cuffdiff.frag_bias_correct",
          "source": [
            "#Reference"
          ]
        },
        {
          "id": "#Cuffdiff.dispersion_method"
        },
        {
          "id": "#Cuffdiff.contrast_file"
        },
        {
          "id": "#Cuffdiff.compatible_hits_norm"
        },
        {
          "id": "#Cuffdiff.FDR"
        }
      ],
      "outputs": [
        {
          "id": "#Cuffdiff.zipped"
        }
      ],
      "sbg:x": 948,
      "sbg:y": 377
    },
    {
      "id": "#CummeRbundQC",
      "run": {
        "sbg:project": "bix-demo/cummerbundqc-2-8-2-demo",
        "sbg:validationErrors": [],
        "sbg:sbgMaintained": false,
        "id": "admin/sbg-public-data/cummerbundqc/2",
        "x": 1106,
        "sbg:toolkit": "CummeRbund",
        "sbg:revisionsInfo": [
          {
            "sbg:revision": 0,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911523
          },
          {
            "sbg:revision": 1,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911523
          }
        ],
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://bioconductor.org/packages/release/bioc/html/cummeRbund.html"
          },
          {
            "label": "Manual",
            "id": "http://bioconductor.org/packages/release/bioc/vignettes/cummeRbund/inst/doc/cummeRbund-manual.pdf"
          },
          {
            "label": "Publication",
            "id": "http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3334321/"
          }
        ],
        "sbg:createdBy": "bix-demo",
        "sbg:revision": 1,
        "sbg:cmdPreview": "python /opt/cummerbund-qc.py --cuffzip cuffdiff_zip.ext --dispthreshold 0 --densthreshold 0 --thresholdsoff  cuffdiff_zip.ext",
        "sbg:createdOn": 1450911523,
        "sbg:contributors": [
          "bix-demo"
        ],
        "sbg:id": "admin/sbg-public-data/cummerbundqc/2",
        "stdout": "",
        "description": "CummeRbundQC assesses the quality of a differential expression analysis performed with Cuffdiff. It accepts differential expression results in the form of a cuffdiff.zip folder as input and produces a report with charts that can be viewed on Seven Bridges platform or downloaded to your local drive. \n\nCummeRbundQC is built on top of CummeRbund v. 2.8.2. CummeRbundQC incorporates the \"Global Statistics and Quality Control\" graphs described in the CummeRbund manual. These visualizations provide an overview of the relationships among the replicates and help in detecting over-dispersion in samples.",
        "successCodes": [],
        "sbg:toolAuthor": "Cole Trapnell/University of Washington",
        "sbg:license": "Artistic License 2.0",
        "stdin": "",
        "hints": [
          {
            "dockerPull": "images.sbgenomics.com/ana_d/cummerbund-qc:2.8.2--1.0",
            "dockerImageId": "0c4541b52eb7",
            "class": "DockerRequirement"
          },
          {
            "value": 8,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 6000,
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedOn": 1450911523,
        "label": "CummeRbundQC",
        "baseCommand": [
          "python",
          "/opt/cummerbund-qc.py"
        ],
        "sbg:categories": [
          "Differential-Expression",
          "Plotting-and-Rendering"
        ],
        "class": "CommandLineTool",
        "y": 378,
        "temporaryFailCodes": [],
        "requirements": [],
        "outputs": [
          {
            "type": [
              "null",
              "File"
            ],
            "outputBinding": {
              "sbg:metadata": {},
              "sbg:inheritMetadataFrom": "#cuffdiff_zip",
              "glob": "*.b64html"
            },
            "label": "Report",
            "sbg:fileTypes": "B64HTML",
            "id": "#html",
            "description": "Base64 encoded HTML report prepared for easy viewing."
          },
          {
            "type": [
              "null",
              "File"
            ],
            "outputBinding": {
              "sbg:metadata": {},
              "sbg:inheritMetadataFrom": "#cuffdiff_zip",
              "glob": "*.zip"
            },
            "label": "Report archive",
            "sbg:fileTypes": "ZIP",
            "id": "#archive",
            "description": "Downloadable zipped report."
          }
        ],
        "sbg:toolkitVersion": "2.8.2",
        "sbg:modifiedBy": "bix-demo",
        "sbg:latestRevision": 1,
        "arguments": [],
        "inputs": [
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "False",
            "inputBinding": {
              "prefix": "--thresholdsoff",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Turn off thresholds",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#thresholds_off",
            "description": "Set this parameter in case you don't want to eliminate lower expressed genes on dispersion and density plots. Be aware that this would cause plots to be stretched in order to show these low values for dispersion and FPKM."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "0.01",
            "inputBinding": {
              "prefix": "--dispthreshold",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Dispersion plot threshold",
            "type": [
              "null",
              "float"
            ],
            "id": "#dispersion_threshold",
            "description": "Changing this parameter sets threshold for the genes that are displayed on dispersion plot, namely it removes from the plot all genes that have dispersion lower than this value."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "0.0001",
            "inputBinding": {
              "prefix": "--densthreshold",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Density plot threshold",
            "type": [
              "null",
              "float"
            ],
            "id": "#density_threshold",
            "description": "Changing this parameter sets threshold for the genes that are displayed on both density plots. It removes from the plots all genes that have FPKM value lower than this value."
          },
          {
            "required": true,
            "type": [
              "File"
            ],
            "inputBinding": {
              "prefix": "--cuffzip",
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Archive of Cuffdiff output files",
            "sbg:category": "Input files",
            "sbg:fileTypes": "ZIP",
            "id": "#cuffdiff_zip",
            "description": "Zipped list of output tracking, tab delimited and INFO files."
          }
        ],
        "sbg:job": {
          "allocatedResources": {
            "mem": 6000,
            "cpu": 8
          },
          "inputs": {
            "density_threshold": 0,
            "cuffdiff_zip": {
              "path": "cuffdiff_zip.ext",
              "class": "File",
              "secondaryFiles": [],
              "size": 0
            },
            "thresholds_off": true,
            "dispersion_threshold": 0
          }
        }
      },
      "inputs": [
        {
          "id": "#CummeRbundQC.thresholds_off"
        },
        {
          "id": "#CummeRbundQC.dispersion_threshold"
        },
        {
          "id": "#CummeRbundQC.density_threshold"
        },
        {
          "id": "#CummeRbundQC.cuffdiff_zip",
          "source": [
            "#Cuffdiff.zipped"
          ]
        }
      ],
      "outputs": [
        {
          "id": "#CummeRbundQC.html"
        },
        {
          "id": "#CummeRbundQC.archive"
        }
      ],
      "sbg:x": 1106,
      "sbg:y": 378
    },
    {
      "id": "#SBG_Group_Input",
      "run": {
        "sbg:project": "bix-demo/sbgtools-demo",
        "sbg:validationErrors": [],
        "sbg:sbgMaintained": false,
        "sbg:license": "Apache License 2.0",
        "x": 349,
        "sbg:toolkit": "SBGTools",
        "sbg:revisionsInfo": [
          {
            "sbg:revision": 0,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911284
          },
          {
            "sbg:revision": 1,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911284
          },
          {
            "sbg:revision": 2,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "ana_d",
            "sbg:modifiedOn": 1461757667
          }
        ],
        "id": "admin/sbg-public-data/sbg-group-input/2",
        "sbg:createdBy": "bix-demo",
        "sbg:revision": 2,
        "sbg:cmdPreview": "python /opt/sbg-groupcp.py --group /test-data/input_files.ext.ext2,/test-data/input_files2.ext.ext2,/test-data/input_files3.ext.ext2 --dest ./group_out",
        "sbg:createdOn": 1450911284,
        "sbg:contributors": [
          "bix-demo",
          "ana_d"
        ],
        "sbg:id": "admin/sbg-public-data/sbg-group-input/2",
        "stdout": "",
        "description": "SBG Group Input accepts list of files that need to be grouped and sets the metadata field that indicates these files belong to the same group. This app should be included in the pipeline once for each group and used together with SBG Flatten. Each SBG Group Input output should be passed to SBG Flatten \"Nested\" input.",
        "successCodes": [],
        "sbg:toolAuthor": "Ana Damljanovic/ Seven Bridges Genomics",
        "sbg:image_url": null,
        "stdin": "",
        "hints": [
          {
            "dockerPull": "images.sbgenomics.com/ana_d/sbg-groupcp:1.0",
            "dockerImageId": "d89b97cad221",
            "class": "DockerRequirement"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 1000,
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedOn": 1461757667,
        "temporaryFailCodes": [],
        "baseCommand": [
          "python",
          "/opt/sbg-groupcp.py"
        ],
        "class": "CommandLineTool",
        "y": 196,
        "sbg:categories": [
          "Other"
        ],
        "requirements": [
          {
            "requirements": [
              {
                "dockerPull": "rabix/js-engine",
                "class": "DockerRequirement"
              }
            ],
            "id": "#cwl-js-engine",
            "class": "ExpressionEngineRequirement"
          }
        ],
        "outputs": [
          {
            "type": [
              "null",
              {
                "type": "array",
                "items": "File",
                "name": "grouped_files"
              }
            ],
            "id": "#grouped_files",
            "outputBinding": {
              "sbg:metadata": {
                "sample_group": {
                  "engine": "#cwl-js-engine",
                  "script": "$job.inputs.group_name",
                  "class": "Expression"
                }
              },
              "sbg:inheritMetadataFrom": "#input_files",
              "glob": "group_out/*"
            },
            "description": "Processed (grouped) files with metadata field indicating the same group.",
            "label": "Grouped Files"
          }
        ],
        "sbg:toolkitVersion": "1.0",
        "sbg:modifiedBy": "ana_d",
        "label": "SBG Group Input",
        "sbg:latestRevision": 2,
        "arguments": [
          {
            "prefix": "--dest",
            "separate": true,
            "position": 3,
            "valueFrom": "./group_out"
          }
        ],
        "inputs": [
          {
            "required": true,
            "type": [
              {
                "items": "File",
                "type": "array"
              }
            ],
            "inputBinding": {
              "prefix": "--group",
              "separate": true,
              "position": 2,
              "itemSeparator": ",",
              "sbg:cmdInclude": true
            },
            "label": "Input files",
            "sbg:category": "Input files",
            "id": "#input_files",
            "description": "Provide files which belong to one group."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "-",
            "label": "Group name",
            "type": [
              "string"
            ],
            "id": "#group_name",
            "description": "Specify the name of the group."
          }
        ],
        "sbg:job": {
          "allocatedResources": {
            "mem": 1000,
            "cpu": 1
          },
          "inputs": {
            "group_name": "group_name",
            "input_files": [
              {
                "path": "/test-data/input_files.ext.ext2"
              },
              {
                "path": "/test-data/input_files2.ext.ext2"
              },
              {
                "path": "/test-data/input_files3.ext.ext2"
              }
            ]
          }
        }
      },
      "inputs": [
        {
          "id": "#SBG_Group_Input.input_files",
          "source": [
            "#Group_ERR315421"
          ]
        },
        {
          "id": "#SBG_Group_Input.group_name",
          "source": [
            "#group_name"
          ]
        }
      ],
      "outputs": [
        {
          "id": "#SBG_Group_Input.grouped_files"
        }
      ],
      "sbg:x": 349,
      "sbg:y": 196
    },
    {
      "id": "#SBG_Group_Input_1",
      "run": {
        "sbg:project": "bix-demo/sbgtools-demo",
        "sbg:validationErrors": [],
        "sbg:sbgMaintained": false,
        "sbg:license": "Apache License 2.0",
        "x": 348,
        "sbg:toolkit": "SBGTools",
        "sbg:revisionsInfo": [
          {
            "sbg:revision": 0,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911284
          },
          {
            "sbg:revision": 1,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911284
          },
          {
            "sbg:revision": 2,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "ana_d",
            "sbg:modifiedOn": 1461757667
          }
        ],
        "id": "admin/sbg-public-data/sbg-group-input/2",
        "sbg:createdBy": "bix-demo",
        "sbg:revision": 2,
        "sbg:cmdPreview": "python /opt/sbg-groupcp.py --group /test-data/input_files.ext.ext2,/test-data/input_files2.ext.ext2,/test-data/input_files3.ext.ext2 --dest ./group_out",
        "sbg:createdOn": 1450911284,
        "sbg:contributors": [
          "bix-demo",
          "ana_d"
        ],
        "sbg:id": "admin/sbg-public-data/sbg-group-input/2",
        "stdout": "",
        "description": "SBG Group Input accepts list of files that need to be grouped and sets the metadata field that indicates these files belong to the same group. This app should be included in the pipeline once for each group and used together with SBG Flatten. Each SBG Group Input output should be passed to SBG Flatten \"Nested\" input.",
        "successCodes": [],
        "sbg:toolAuthor": "Ana Damljanovic/ Seven Bridges Genomics",
        "sbg:image_url": null,
        "stdin": "",
        "hints": [
          {
            "dockerPull": "images.sbgenomics.com/ana_d/sbg-groupcp:1.0",
            "dockerImageId": "d89b97cad221",
            "class": "DockerRequirement"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 1000,
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedOn": 1461757667,
        "temporaryFailCodes": [],
        "baseCommand": [
          "python",
          "/opt/sbg-groupcp.py"
        ],
        "class": "CommandLineTool",
        "y": 343,
        "sbg:categories": [
          "Other"
        ],
        "requirements": [
          {
            "requirements": [
              {
                "dockerPull": "rabix/js-engine",
                "class": "DockerRequirement"
              }
            ],
            "id": "#cwl-js-engine",
            "class": "ExpressionEngineRequirement"
          }
        ],
        "outputs": [
          {
            "type": [
              "null",
              {
                "type": "array",
                "items": "File",
                "name": "grouped_files"
              }
            ],
            "id": "#grouped_files",
            "outputBinding": {
              "sbg:metadata": {
                "sample_group": {
                  "engine": "#cwl-js-engine",
                  "script": "$job.inputs.group_name",
                  "class": "Expression"
                }
              },
              "sbg:inheritMetadataFrom": "#input_files",
              "glob": "group_out/*"
            },
            "description": "Processed (grouped) files with metadata field indicating the same group.",
            "label": "Grouped Files"
          }
        ],
        "sbg:toolkitVersion": "1.0",
        "sbg:modifiedBy": "ana_d",
        "label": "SBG Group Input",
        "sbg:latestRevision": 2,
        "arguments": [
          {
            "prefix": "--dest",
            "separate": true,
            "position": 3,
            "valueFrom": "./group_out"
          }
        ],
        "inputs": [
          {
            "required": true,
            "type": [
              {
                "items": "File",
                "type": "array"
              }
            ],
            "inputBinding": {
              "prefix": "--group",
              "separate": true,
              "position": 2,
              "itemSeparator": ",",
              "sbg:cmdInclude": true
            },
            "label": "Input files",
            "sbg:category": "Input files",
            "id": "#input_files",
            "description": "Provide files which belong to one group."
          },
          {
            "sbg:category": "Basic Options",
            "sbg:toolDefaultValue": "-",
            "label": "Group name",
            "type": [
              "string"
            ],
            "id": "#group_name",
            "description": "Specify the name of the group."
          }
        ],
        "sbg:job": {
          "allocatedResources": {
            "mem": 1000,
            "cpu": 1
          },
          "inputs": {
            "group_name": "group_name",
            "input_files": [
              {
                "path": "/test-data/input_files.ext.ext2"
              },
              {
                "path": "/test-data/input_files2.ext.ext2"
              },
              {
                "path": "/test-data/input_files3.ext.ext2"
              }
            ]
          }
        }
      },
      "inputs": [
        {
          "id": "#SBG_Group_Input_1.input_files",
          "source": [
            "#Group_ERR315335"
          ]
        },
        {
          "id": "#SBG_Group_Input_1.group_name",
          "source": [
            "#group_name_1"
          ]
        }
      ],
      "outputs": [
        {
          "id": "#SBG_Group_Input_1.grouped_files"
        }
      ],
      "sbg:x": 348,
      "sbg:y": 343
    },
    {
      "id": "#SBG_Flatten",
      "run": {
        "sbg:project": "bix-demo/sbgtools-demo",
        "sbg:validationErrors": [],
        "sbg:sbgMaintained": false,
        "id": "admin/sbg-public-data/sbg-flatten/2",
        "sbg:toolkit": "SBGTools",
        "sbg:revisionsInfo": [
          {
            "sbg:revision": 0,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911285
          },
          {
            "sbg:revision": 1,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bix-demo",
            "sbg:modifiedOn": 1450911285
          },
          {
            "sbg:revision": 2,
            "sbg:revisionNotes": "Changed to be able to flatten irregular list of lists.",
            "sbg:modifiedBy": "ana_d",
            "sbg:modifiedOn": 1471438679
          }
        ],
        "sbg:createdBy": "bix-demo",
        "sbg:revision": 2,
        "sbg:cmdPreview": "python /opt/sbg-flatten.py",
        "sbg:createdOn": 1450911285,
        "sbg:contributors": [
          "bix-demo",
          "ana_d"
        ],
        "sbg:id": "admin/sbg-public-data/sbg-flatten/2",
        "stdout": "",
        "description": "SBG Flatten is used only with SBG Group Input app for purposes of providing grouped inputs. All SBG Group Input outputs should be passed to the \"Nested\" SBG Flatten input in order to produce the output with all grouped files as one list.",
        "successCodes": [],
        "sbg:toolAuthor": "Ana Damljanovic/ Seven Bridges Genomics",
        "sbg:image_url": null,
        "stdin": "",
        "hints": [
          {
            "dockerPull": "images.sbgenomics.com/ana_d/sbg-flatten:2.0",
            "dockerImageId": "c0e1d93b3d76",
            "class": "DockerRequirement"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 1000,
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedOn": 1471438679,
        "sbg:categories": [
          "Other"
        ],
        "baseCommand": [
          "python",
          "/opt/sbg-flatten.py"
        ],
        "sbg:revisionNotes": "Changed to be able to flatten irregular list of lists.",
        "class": "CommandLineTool",
        "sbg:license": "Apache License 2.0",
        "label": "SBG Flatten",
        "requirements": [],
        "outputs": [
          {
            "type": [
              "null",
              {
                "items": "File",
                "type": "array"
              }
            ],
            "id": "#flat",
            "outputBinding": {
              "sbg:metadata": {}
            },
            "description": "All grouped files as one list.",
            "label": "All grouped files"
          }
        ],
        "sbg:toolkitVersion": "1.0",
        "sbg:modifiedBy": "ana_d",
        "temporaryFailCodes": [],
        "sbg:latestRevision": 2,
        "arguments": [],
        "inputs": [
          {
            "sbg:category": "Input files",
            "label": "Nested",
            "id": "#nested",
            "description": "Files from all SBG Group Input outputs should be provided.",
            "type": [
              {
                "items": "File",
                "type": "array"
              }
            ],
            "required": true
          }
        ],
        "sbg:job": {
          "allocatedResources": {
            "mem": 1000,
            "cpu": 1
          },
          "inputs": {
            "nested": "nested"
          }
        },
        "x": 529,
        "y": 268
      },
      "inputs": [
        {
          "id": "#SBG_Flatten.nested",
          "source": [
            "#SBG_Group_Input_1.grouped_files",
            "#SBG_Group_Input.grouped_files"
          ]
        }
      ],
      "outputs": [
        {
          "id": "#SBG_Flatten.flat"
        }
      ],
      "sbg:x": 529,
      "sbg:y": 268
    }
  ],
  "requirements": [],
  "inputs": [
    {
      "type": [
        "null",
        "File"
      ],
      "sbg:x": 501,
      "sbg:y": 396,
      "label": "#Reference",
      "id": "#Reference",
      "sbg:includeInPorts": true
    },
    {
      "type": [
        "File"
      ],
      "sbg:x": 609,
      "sbg:y": 450,
      "label": "#Annotations",
      "id": "#Annotations",
      "sbg:includeInPorts": true,
      "sbg:suggestedValue": {
        "class": "File",
        "name": "Homo_sapiens.GRCh37.75.gtf",
        "path": "5772b6c4507c1752674486cd"
      }
    },
    {
      "type": [
        {
          "items": "File",
          "type": "array"
        }
      ],
      "sbg:x": 179,
      "sbg:y": 196,
      "label": "#BAM_Group_A",
      "id": "#Group_ERR315421",
      "sbg:includeInPorts": true
    },
    {
      "type": [
        {
          "items": "File",
          "type": "array"
        }
      ],
      "sbg:x": 179,
      "sbg:y": 343,
      "label": "#BAM_Group_B",
      "id": "#Group_ERR315335",
      "sbg:includeInPorts": true
    },
    {
      "sbg:category": "Basic Options",
      "sbg:toolDefaultValue": "-",
      "sbg:suggestedValue": "Group_A",
      "type": [
        "string"
      ],
      "id": "#group_name",
      "label": "Group name",
      "description": "Specify the name of the group."
    },
    {
      "sbg:category": "Basic Options",
      "sbg:toolDefaultValue": "-",
      "sbg:suggestedValue": "Group_B",
      "type": [
        "string"
      ],
      "id": "#group_name_1",
      "label": "Group name",
      "description": "Specify the name of the group."
    }
  ],
  "outputs": [
    {
      "type": [
        "null",
        "File"
      ],
      "sbg:x": 1108,
      "sbg:y": 242,
      "required": false,
      "label": "zipped",
      "id": "#zipped",
      "sbg:includeInPorts": true,
      "source": [
        "#Cuffdiff.zipped"
      ]
    },
    {
      "type": [
        "null",
        "File"
      ],
      "sbg:x": 1242,
      "sbg:y": 313,
      "required": false,
      "label": "html",
      "id": "#html",
      "sbg:includeInPorts": true,
      "source": [
        "#CummeRbundQC.html"
      ]
    },
    {
      "type": [
        "null",
        "File"
      ],
      "sbg:x": 1247,
      "sbg:y": 439,
      "required": false,
      "label": "archive",
      "id": "#archive",
      "sbg:includeInPorts": true,
      "source": [
        "#CummeRbundQC.archive"
      ]
    }
  ],
  "sbg:project": "marko_zecevic/sbde1",
  "sbg:sbgMaintained": false,
  "sbg:image_url": null,
  "sbg:toolkit": "Cufflinks",
  "sbg:revisionsInfo": [
    {
      "sbg:revision": 0,
      "sbg:revisionNotes": "Copy of admin/sbg-public-data/rna-seq-differential-expression/3",
      "sbg:modifiedBy": "marko_zecevic",
      "sbg:modifiedOn": 1470747259
    },
    {
      "sbg:revision": 1,
      "sbg:revisionNotes": "Copy of admin/sbg-public-data/rna-seq-differential-expression/5",
      "sbg:modifiedBy": "marko_zecevic",
      "sbg:modifiedOn": 1471777995
    }
  ],
  "sbg:copyOf": "admin/sbg-public-data/rna-seq-differential-expression/5",
  "sbg:canvas_y": -92,
  "sbg:revision": 1,
  "sbg:createdOn": 1470747259,
  "sbg:id": "marko_zecevic/sbde1/rna-seq-differential-expression/1",
  "sbg:modifiedBy": "marko_zecevic",
  "sbg:toolAuthor": "Seven Bridges Genomics",
  "sbg:license": "Apache License 2.0",
  "sbg:createdBy": "marko_zecevic",
  "sbg:modifiedOn": 1471777995,
  "sbg:canvas_x": -75,
  "sbg:revisionNotes": "Copy of admin/sbg-public-data/rna-seq-differential-expression/5",
  "sbg:categories": [
    "Differential-Expression",
    "RNA"
  ],
  "sbg:canvas_zoom": 0.7499999999999998,
  "sbg:validationErrors": [],
  "sbg:toolkitVersion": "2.2.1",
  "sbg:latestRevision": 1,
  "sbg:contributors": [
    "marko_zecevic"
  ],
  "id": "marko_zecevic/sbde1/rna-seq-differential-expression/1",
  "label": "RNA-seq Differential Expression",
  "description": "Profiling the transcriptome of cells and tissues under different conditions provides unique insights into the molecular basis of phenotypic variation in biology and can provide a more complete understanding of both normal and pathological processes. Identification of differentially expressed genes and transcripts is the most common application of transcriptome profiling by RNA-Seq. In addition to these changes, RNA-Seq allows detection of alterations in transcription start sites and alternate coding regions as well as identification of differential splicing between conditions.\n\nThis pipeline uses Cuffdiff to find significant differences in transcripts expression between groups of samples. The Cuffdiff algorithm incorporates both biological and technical variability in order to identify differentially expressed genes and transcripts. Thus, the ability to detect true significant changes (and limit false positive detections) is determined by the number of replicates included in an experiment and the inter-replicate variability.\n\nOn the Seven Bridges Platform, you can use this pipeline in combination with the RNA-Seq Alignment  TopHat Public Pipeline to take you all the way from raw sequencing reads to visualization and a list of differentially expressed genes and transcripts.\n\nCuffdiff allows detection of differential expression at the gene, isoform, tss and cds levels. Following quantitation, Cuffdiff performs differential expression tests between groups of samples. This pipeline also performs basic quality control analysis of your differential expression experiment powered by CummeRbundQC.\n\nGroup input: At least two aligned reads files in BAM or SAM format. You will need to set the name of your groups; this name will then be used to report results. For example if you have three replicates (A, B, & C) of an experimental condition (X), set the \"Group name\" parameter in \"SBG Group Input\" app to X and add BAM files A, B, & C to the group. The number of replicates doesnt need to be the same in each experimental condition. If you use fewer than 3 replicates per condition, by default Cuffdiff will not test for significant alterations in splicing, tss, or cds usage. If there are more than two groups, modify the pipeline by adding more \"SBG Group Input\" apps and connecting these to the \"SBG Flatten\" input.\nReference (FASTA): FASTA file containing reference genome. For Human samples we recommend \"ucsc.hg19.fasta\".\nAnnotations (GTF): Gene Transfer Format file containing known transcripts annotations. GTF file needs to be augmented with tss_id and p_id attributes in order to look for changes in primary transcript expression, splicing, coding output, and promoter use. For Human samples we recommend Ensembl gene annotations with chromosome names converted to be compatible with the UCSC format \"human\\_hg19\\_genes.2014.gtf\".",
  "hints": [
    {
      "value": "c3.8xlarge",
      "class": "sbg:AWSInstanceType"
    }
  ]
}